(()=>{var e={500:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.plugins,a=window.wp.hooks,r=window.wp.i18n;n(500);const s=window.wp.element,o=window.wp.components,i=window.wc.navigation,l=window.wp.apiFetch;var c=n.n(l);function p(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function u(t,n){let a,r,s=[];for(let e=0;e<t.length;e++){const o=t[e];if("string"!==o.type){if(void 0===n[o.value])throw new Error(`Invalid interpolation, missing component node: \`${o.value}\``);if("object"!=typeof n[o.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${o.value}\``);if("componentClose"===o.type)throw new Error(`Missing opening component token: \`${o.value}\``);if("componentOpen"===o.type){a=n[o.value],r=e;break}s.push(n[o.value])}else s.push(o.value)}if(a){const o=function(e,t){const n=t[e];let a=0;for(let r=e+1;r<t.length;r++){const e=t[r];if(e.value===n.value){if("componentOpen"===e.type){a++;continue}if("componentClose"===e.type){if(0===a)return r;a--}}}throw new Error("Missing closing component token `"+n.value+"`")}(r,t),i=u(t.slice(r+1,o),n),l=(0,e.cloneElement)(a,{},i);if(s.push(l),o<t.length-1){const e=u(t.slice(o+1),n);s=s.concat(e)}}return s=s.filter(Boolean),0===s.length?null:1===s.length?s[0]:(0,e.createElement)(e.Fragment,null,...s)}const m={button:{get_started:(0,r.__)("Get Started!","transactpay"),save_settings:(0,r.__)("Save Configuration","transactpay"),enable_test_mode:(0,r.__)("Enable Test mode","transactpay"),disable_test_mode:(0,r.__)("Disable Test mode","transactpay")},heading:e=>(0,r.sprintf)(/* translators: %s: first name of the merchant, if it exists, %s: TransactPay. */ /* translators: %s: first name of the merchant, if it exists, %s: TransactPay. */
(0,r.__)("Hi%s,\n Welcome to %s!","transactpay"),e?` ${e}`:"","transactpay"),settings:{general:(0,r.__)("API/Webhook Settings","transactpay"),checkout:(0,r.__)("Checkout Settings","transactpay")},card:(0,r.__)("Offer card payments","transactpay"),sandboxMode:{title:(0,r.__)("Test Mode: I'm setting up a store for someone else.","transactpay"),description:(0,r.sprintf)(/* translators: %s: Transactpay */ /* translators: %s: Transactpay */
(0,r.__)("This option will set up %s in test mode. When you’re ready to launch your store, switching to live payments is easy.","transactpay"),"Transactpay")},testModeNotice:function(e){const{mixedString:t,components:n,throwErrors:a}=e;if(!n)return t;if("object"!=typeof n){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const r=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(p)}(t);try{return u(r,n)}catch(e){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}({mixedString:(0,r.__)("Test mode is enabled, only test credentials can be used to make payments. If you want to process live transactions, please {{learnMoreLink}}disable it{{/learnMoreLink}}.","transactpay"),components:{learnMoreLink:(0,e.createElement)("a",{href:"#",target:"_blank",rel:"noreferrer"})}}),infoNotice:{button:(0,r.__)("enable collection.","transactpay")},infoModal:{title:(0,r.sprintf)(/* translators: %s: Transactpay */ /* translators: %s: Transactpay */
(0,r.__)("Verifying your information with %s","transactpay"),"Transactpay")},stepsHeading:(0,r.__)("You’re only steps away from getting paid","transactpay"),step1:{heading:(0,r.__)("Create and connect your account","transactpay"),description:(0,r.__)("To ensure safe and secure transactions, a WordPress.com account is required.","transactpay")},step3:{heading:(0,r.__)("Setup complete!","transactpay"),description:(0,r.sprintf)(/* translators: %s: Transactpay */ /* translators: %s: Transactpay */
(0,r.__)("You’re ready to start using the features and benefits of %s.","transactpay"),"Transactpay")},onboardingDisabled:(0,r.__)("We've temporarily paused new account creation. We'll notify you when we resume!","transactpay"),incentive:{termsAndConditions:t=>(0,s.createInterpolateElement)((0,r.__)("*See <a>Terms and Conditions</a> for details.","transactpay"),{a:(0,e.createElement)("a",{href:t,target:"_blank",rel:"noopener noreferrer"})})},nonSupportedCountry:(0,s.createInterpolateElement)((0,r.sprintf)(/* translators: %1$s: Transactpay */ /* translators: %1$s: Transactpay */
(0,r.__)("<b>%1$s is not currently available in your location</b>.","transactpay"),"Transactpay"),{b:(0,e.createElement)("b",null),a:(0,e.createElement)("a",{href:"#",target:"_blank",rel:"noopener noreferrer"})})};class y extends s.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){return this.state.error?(0,e.createElement)("div",null,(0,r.__)("There was an error rendering this view. Please contact support for assistance if the problem persists.","transactpay"),(0,e.createElement)("br",null),this.state.error.toString()):this.props.children}}const d=y,_=({children:t,maxWidth:n,isNarrow:a,className:r=""})=>{const s=n?{maxWidth:n}:void 0,o=[r,"transactpay-page"];return a&&o.push("is-narrow"),(0,e.createElement)("div",{className:o.join(" "),style:s},(0,e.createElement)(d,null,t))},g=({labelName:t,initalValue:n,options:a})=>{const[r,s]=(0,e.useState)(n);return(0,e.createElement)(o.SelectControl,{label:t||"{{ No Label Added }}",value:r,options:a,onChange:s})},h=({initialValue:t,labelName:n,onChange:a,isConfidential:r})=>{const s=r||!1,[i,l]=(0,e.useState)(t);return(0,e.useEffect)((()=>{}),[i]),(0,e.createElement)(o.__experimentalInputControl,{label:n||"{{label_name}}",value:i,type:s?"password":"text",onChange:e=>(e=>{a(e),l(e)})(e)})},b="transactpay/v1",f="/settings";c()({path:b+f}).then((e=>console.log(e)));const v=({children:t,onClick:n})=>{const[a,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{}),[a]),(0,e.createElement)(o.Button,{className:"transactpay-settings-cta",variant:"secondary",isBusy:a,disabled:!1,onClick:()=>{r(!0),n(r)}},t)},E=({onClick:t,isDestructive:n,isBusy:a,children:r})=>{const[i,l]=(0,s.useState)(n);return(0,s.useEffect)((()=>{}),[n]),(0,e.createElement)(o.Button,{className:"transactpay-settings-cta",variant:"secondary",isBusy:a,disabled:!1,isDestructive:i,onClick:()=>{t(),l(!i)}},r)},w=()=>{const t=transactpayData?.transactpay_defaults,[n,a]=(0,s.useState)(!1),r=wcSettings.admin?.currentUserData?.first_name||"there",i=transactpayData?.transactpay_logo,[l,p]=(0,s.useState)(t),[u,y]=(0,s.useState)(!1);let d={};""!=r&&(d.whiteSpaceCollapse="preserve-breaks");const w=(e,t)=>{p((n=>({...n,[e]:t})))};return(0,e.createElement)(s.Fragment,null,(0,e.createElement)(_,{isNarrow:!0},(0,e.createElement)(o.Card,{className:"transactpay-page-banner"},(0,e.createElement)("div",{className:"transactpay-page__heading"},(0,e.createElement)("img",{className:"transactpay__settings_logo",alt:"transactpay-logo",src:i,id:"transactpay__settings_logo"}),(0,e.createElement)("h2",{className:"transactpay-font-heading",style:{marginLeft:"15px",...d}},m.heading(r))),(0,e.createElement)("div",{className:"transactpay-page__buttons"},(0,e.createElement)(o.Button,{variant:"primary",isBusy:!1,disabled:u,onClick:()=>{a(!0),y(!1)}},m.button.get_started))),(0,e.createElement)(o.Panel,{className:"transactpay-page__general_settings-panel"},(0,e.createElement)(o.PanelBody,{title:m.settings.general,initialOpen:n},(0,e.createElement)("div",{className:"transactpay-settings__general"},(0,e.createElement)(o.ToggleControl,{checked:"yes"==l.enabled,label:"Enable Transactpay",onChange:()=>p((e=>({...e,enabled:"yes"==e.enabled?"no":"yes"})))}),(0,e.createElement)("div",{className:"transactpay-settings__inputs"},(0,e.createElement)(h,{labelName:"Secret Key",initialValue:l.live_secret_key,onChange:e=>{w("live_secret_key",e)},isConfidential:!0}),(0,e.createElement)(h,{labelName:"Public Key",initialValue:l.live_public_key,onChange:e=>{w("live_public_key",e)}}),(0,e.createElement)(h,{labelName:"Encryption Key",initialValue:l.live_encryption_key,onChange:e=>{w("live_encryption_key",e)}})),(0,e.createElement)(o.__experimentalText,{className:"transactpay-webhook-link",numberOfLines:1},transactpayData.transactpay_webhook),(0,e.createElement)(o.__experimentalText,{className:"transactpay-webhook-instructions",numberOfLines:1},"Please add this webhook URL and paste on the webhook section on your dashboard.")),(0,e.createElement)("div",{className:"transactpay-settings-btn-center"},(0,e.createElement)(v,{onClick:e=>{c()({path:b+f,method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},data:l}).then((t=>{console.log("Settings saved successfully:",t),e(!1)})).catch((e=>{console.error("Error saving settings:",e)}))}},m.button.save_settings)))),(0,e.createElement)(o.Panel,{className:"transactpay-page__checkout_settings-panel"},(0,e.createElement)(o.PanelBody,{title:m.settings.checkout,initialOpen:!1},(0,e.createElement)("div",{className:"transactpay-settings__inputs"},(0,e.createElement)(o.CheckboxControl,{checked:"yes"==l.autocomplete_order,help:"should we complete the order on a confirmed payment?",label:"Autocomplete Order After Payment",onChange:()=>p((e=>({...e,autocomplete_order:"yes"==e.autocomplete_order?"no":"yes"})))}),(0,e.createElement)(h,{labelName:"Payment method Title",initialValue:l.title,onChange:e=>{w("title",e)}}),(0,e.createElement)(g,{labelName:"Payment Style on Checkout",initialValue:l.payment_style,options:[{label:"Popup",value:"inline"}]})),(0,e.createElement)("div",{className:"transactpay-settings-btn-center"},(0,e.createElement)(v,{onClick:e=>{c()({path:b+f,method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},data:l}).then((t=>{console.log("Settings saved successfully:",t),e(!1)})).catch((e=>{console.error("Error saving settings:",e)}))}},m.button.save_settings)))),(0,e.createElement)(o.Panel,{className:"transactpay-page__sandbox-mode-panel"},(0,e.createElement)(o.PanelBody,{title:m.sandboxMode.title,initialOpen:!1},(0,e.createElement)("p",null,m.sandboxMode.description),(0,e.createElement)("div",{className:"transactpay-settings__inputs"},(0,e.createElement)(h,{labelName:"Test Secret Key",initialValue:l.test_secret_key,onChange:e=>{w("test_secret_key",e)},isConfidential:!0}),(0,e.createElement)(h,{labelName:"Test Public Key",initialValue:l.test_public_key,onChange:e=>{w("test_public_key",e)}}),(0,e.createElement)(h,{labelName:"Test Encryption Key",initialValue:l.test_encryption_key,onChange:e=>{w("test_encryption_key",e)}})),(0,e.createElement)(E,{className:"transactpay-settings-cta",variant:"secondary",isBusy:!1,disabled:!1,isDestructive:"no"==l.go_live,onClick:()=>{p((e=>({...e,go_live:"yes"==e.go_live?"no":"yes"}))),c()({path:b+f,method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},data:{...l,go_live:"yes"==l.go_live?"no":"yes"}}).then((e=>{console.log("Test mode enabled successfully:",e)})).catch((e=>{console.error("Error saving settings:",e)}))}},"yes"===l.go_live?m.button.enable_test_mode:m.button.disable_test_mode)))))};(0,a.addFilter)("woocommerce_admin_pages_list","transactpay",(e=>(e.push({container:w,path:"/transactpay",wpOpenMenu:"toplevel_page_woocommerce",breadcrumbs:["Transactpay"]}),e))),(0,t.registerPlugin)("my-plugin",{render:()=>(0,e.createElement)(i.WooNavigationItem,{parentMenu:"transactpay-root",item:"transactpay-1"},(0,e.createElement)("a",{className:"components-button",href:"https://merchant.transactpay.ai/"},"TransactPay"))})})()})();